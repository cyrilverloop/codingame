#!/usr/bin/env php
<?php

include_once(__DIR__ . '/../vendor/autoload.php');

use CyrilVerloop\Codingame\Generator\ConfigurationParser;
use CyrilVerloop\Codingame\Generator\TestGenerator;
use CyrilVerloop\Codingame\Generator\TestsGenerator;
use Twig\Environment;
use Twig\Extra\String\StringExtension;
use Twig\Loader\FilesystemLoader;

echo "\nStarting Tests generation.\n";

$parser = new ConfigurationParser();

$loader = new FilesystemLoader(__DIR__ . '/../templates/');
$twig = new Environment($loader);
$twig->addExtension(new StringExtension());
$testGenerator = new TestGenerator($twig);

$generator = new TestsGenerator($parser, $testGenerator);
$generator->generate(__DIR__ . '/../tests/');

echo "Generation complete.\n\n";
